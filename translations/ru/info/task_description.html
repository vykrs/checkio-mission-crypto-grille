<p>
<i>
Это третья миссия на тему классической криптографии. В этом задании мы рассморим зашифрование сообщений с помощью поворотной решетки. 
</i>  
</p>

<p>
Поворотная решетка (или решетка Кардано) - разновидность перестановочного шифра, для которого используется специальный инструмент - квадратный трафарет с вырезанными в нем отверстиями. Шифрование сообщений происходит следующим образом: трафарет кладется на лист бумаги, и в отверстия построчно вписываются буквы открытого текста. Когда все прорези заполнены, трафарет поворачивают на 90 градусов по часовой стрелке - при этом прорези попадают на чистые участки листа - и продолжают выписывать сообщения. После того, как трафарет был приложен всеми четырьмя сторонами, на листе не должно остаться пустых мест. Для длинных сообщений указанный алгоритм может повторяться несколько раз.
</p>

<p>
Например, процесс шифрования сообщения <b>Meet me at eleven PM</b> ключом размера 4х4 будет выглядеть вот так:
</p>
<p class="for_info_only" style="text-align: left;">
    <img src="{{ MEDIA }}encr.png" style="max-height: 200px" />
</p>

<p>
В результате получили шифртекст <b>tmmveeewepeatlmt</b>.
</p>

<p>
Вам даны сообщение и ключ (решетка размера 4х4). Длина открытого текста кратна размеру ключа (в нашем случае 16 символам). 
    От вас требуется зашифровать сообщение по описанному выше алгоритму. Но есть одна проблема - некоторые ключи бракованные. 
    Бракованными мы будем считать решетки, в которых прорези при повороте попадают на уже заполненные клетки таблицы, или такие, 
    что после четырех поворотов на листе остаются незаполненные клетки (примеры "плохих" решеток на рисунке ниже). 
    Соответственно, если решетка хорошая, то в каждую клетку листа будет вписана только ровно одна буква.
</p>

<p class="for_info_only" style="text-align: left;">
    <img src="{{ MEDIA }}bad.png" style="max-height: 200px" />
</p>

<p>
В случае, если ключ нормальный - ваша функция должна вернуть зашифрованное сообщение. Если же ключ бракованный - верните <b>None</b>.
</p>

<p>
    <strong>Входные данные: </strong> открытый текст в виде строки, ключ в виде списка строк (<b>"Х"</b> обозначает прорезь)
</p>

<p>
    <strong>Выходные данные: </strong> криптограмма в виде строки или <b>None</b>
</p>


<!-- Give some usage examples -->
<div class="for_info_only">
    <p>
        <strong>Пример:</strong>
    </p>
<pre class="brush: python">
grille_encrypt('cardangrilletest', ['.X..', '.X..', '...X', 'X...']) == 'actilangeslrdret'
grille_encrypt('quickbrownfoxjumpsoverthelazydog',
                ['X...', '...X', '..X.', '.X..']) == 'qxwkbnjufriumcoopyeerldsatoogvhz'
grille_encrypt('quickbrownfoxjumpsoverthelazydog', 
                ['.XX.', '.XX.', '..X.', 'X...']) == None
grille_encrypt('cardangrilletest', ['...X', '....', '....', '....']) == None        
</pre>
</div>

<p>
 <strong>
  Условия:
 </strong>
 len(key) == 4
 <br/>
 all(len(line) == 4 for line in key)
 <br/>
 len(plaintext) % 16 == 0
 <br/>
 all(all(cell == "X" or cell == "." for cell in line) for line in key)
 <br/>
</p>
